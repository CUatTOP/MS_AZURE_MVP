# SentryQ: Omni-AI Incident & Quality Management

## 📋 목차

- [1. 프로젝트 개요](#overview)
- [2. 아키텍처](#architecture)
- [3. 요소 기술](#core-technologies)
- [4. 향후 개선 및 확장 계획](#future-plans)

---

<a name="overview"></a>
## 1. 프로젝트 개요

LangGraph/ Azure AI 기반 (AI + 자동화) IT 장애 및 품질관리를 위한 종합적인 솔루션으로, 워크플로우 기반의 자동화, LLM 기반 분석/ 판단, 그리고 ML을 통한 실시간 모니터링/ 진단 지능화를 Agent 방식으로 제공하여 ITO 서비스의 Total 품질 인텔리전스를 극대화 합니다.

### 🔑 주요 기술 요소 및 기능 매핑

- **LangChain / LangGraph**  
  - 워크플로우 자동화, Agent 모드(자동 장애 감지/분석/대응) 핵심 엔진

- **Azure OpenAI (GPT-4)**  
  - Ask 모드(자연어 질의응답, SQL 생성, 챗봇), RAG 기반 문서 검색

- **Azure AI Search**  
  - Ask 모드(RAG 문서/DB 검색), 실시간 시스템 현황 질의

- **Azure AI Language**  
  - Ask/Agent 모드(문서 요약, 키워드 추출, 감정 분석 등 자연어 처리)

- **Azure AI Machine Learning**  
  - Agent 모드(장애 예측, 감정분석, 이상탐지 등 ML 기반 자동화)

- **Azure Cosmos DB / SQL Database**  
  - DB 모드(장애/품질/이력 데이터 저장, 통합 관리)

- **Azure Blob Storage**  
  - DB 모드(대용량 로그, 리포트, 문서 파일 저장)

- **Azure AI Vision / Speech**  
  - Agent/Ask 모드(이미지 기반 장애 감지, OCR, 음성 인식 등 멀티모달 확장)

- **RAG (Retrieval-Augmented Generation)**  
  - Ask 모드(문서/DB 검색 결과 LLM 답변에 통합)

- **외부 시스템 연동 (REST API 등)**  
  - Agent/DB 모드(유관 시스템 자동화 연동, 이벤트 트리거)

- **실시간 모니터링/대시보드**  
  - Agent/DB 모드(장애 현황, 품질 지표, 처리 이력 시각화)

> 각 기술 요소는 SentryQ의 Agent/Ask/DB 모드 및 주요 메뉴 기능과 직접적으로 매핑되어, IT 품질/장애 관리의 자동화·지능화·실시간 분석을 지원합니다.





### 주요 동작 모드 요약

- **Agent 모드**: LangGraph 기반 자동화 워크플로우, Azure AI 연동, 실시간 장애 감지 및 대응, 이력 관리
- **Ask 모드**: GPT-4 챗봇, RAG 기반 문서 검색, 시스템 현황 질의/분석, VOC 감정 분석
- **DB 모드**: Azure SQL/Cosmos DB/AI Search/Blob Storage 연동, 데이터 관리 및 분석

각 모드는 IT 품질/장애 관리의 자동화, 지능화, 실시간 분석 및 대응을 지원합니다.

### 주요 기능

- **IT 장애/ 품질 업무의 지능화 및 자동화**
- **장애 감지, 분석, 대응 프로세스의 무인/ 효율화**
- **유관 시스템(I\*\*\*, B-\*\*\*, G\*\*\*+, T\*\*\* 등) 통합 연동**
- **AI 기반 의사결정 지원 및 워크플로우 관리**
- **실시간 시스템 AI 모니터링 및 판단, 장애 감지**
- **AI 기반 종합, 실시간 분석 및 보고서 생성**
- **워크플로우 기반 자동화 프로세스, 처리현황 시각화**
- **Agent TO-DO 리스트 관리 및 이력 추적, 재수행**
- **다중 시스템 통합 자동화 연동 및 인터페이스**

### 🔄 워크플로우 프로세스

**0. START** (순차 or 병렬 처리)

**1. 사전 예방** → 장애 예방 → (CAB 검증 || SOP 점검 || AI-RM)

**2. 장애 대응** → 장애 감지 → (B-**** 감지 || G****+ 감지 || IT통합상황창) → 장애 분석 → 상황 대응 → (임시 조치 || 업무 공지 || 이슈 전파)

**3. 후속 조치** → 근본 원인 분석 → (인시던트 || 문제 관리 || 장애 보고서)

**4. 해결 완료** → 완료 처리

**5. END**

### 🤖 동작 모드

**Agent 모드** - 자동화된 워크플로우 실행
- LangGraph 기반 멀티 노드 자동 실행
- Azure AI 서비스 연동으로 지능형 판단
- 실시간 상태 추적 및 이력 관리
- 장애 감지 시 자동 대응 프로세스 시작

**Ask 모드** - 대화형 질의응답
- GPT-4 기반 자연어 챗봇 인터페이스
- RAG(Retrieval-Augmented Generation)로 3,***개 문서 검색
- 실시간 시스템 현황 질의 및 분석
- VOC 데이터 감정 분석 및 키워드 추출

**DB 모드** - 데이터 관리 및 분석
- Azure SQL DB: 구조화된 시스템 상태 데이터
- Cosmos DB: NoSQL 이벤트 및 로그 데이터
- Azure AI Search: 벡터 기반 의미 검색
- Blob Storage: 파일 저장 및 백업

---

<a name="architecture"></a>
## 2. 아키텍처

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                            웹 인터페이스 레이어                             │
├──────────────────────────────────────────────────────────────────────────────┤
│                            Flask 웹 서버                                    │
│                        (REST API, 대시보드, 인증)                           │
├──────────────────────────────────────────────────────────────────────────────┤
│                            동작 모드 레이어                                 │
│  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐ ┌───────────────┐     │
│  │   Agent 모드   │ │   Ask 모드     │ │   DB 모드      │ │   통합 제어     │     │
│  │ (자동화 워크   │ │ (챗봇/질의)    │ │ (데이터 관리)  │ │ (모드 전환)     │     │
│  │   플로우)      │ │ (GPT-4/RAG)   │ │ (SQL/Cosmos)   │ │ (상태 관리)     │     │
│  └───────────────┘ └───────────────┘ └───────────────┘ └───────────────┘     │
├──────────────────────────────────────────────────────────────────────────────┤
│                            비즈니스 로직 레이어                             │
│  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐ ┌───────────────┐     │
│  │ TO-DO Agent   │ │ 워크플로우 엔진 │ │ AI 분석 엔진   │ │ LangGraph 엔진 │     │
│  │ (LLM 기반)    │ │ (LangGraph)    │ │ (LangChain,    │ │ (멀티에이전트) │     │
│  │               │ │                │ │  Azure AI)     │ │               │     │
│  └───────────────┘ └───────────────┘ └───────────────┘ └───────────────┘     │
│  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐ ┌───────────────┐     │
│  │ 감정 분석 모델 │ │ 이상 탐지 모델 │ │ VOC 분석 엔진 │ │ 시각화 엔진   │     │
│  │ (VOC 분류)     │ │ (Vision 기반)  │ │ (Azure Lang)  │ │ (차트/워드    │     │
│  │               │ │               │ │               │ │ 클라우드)      │     │
│  └───────────────┘ └───────────────┘ └───────────────┘ └───────────────┘     │
│  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐ ┌───────────────┐     │
│  │ Azure ML      │ │ Azure Speech  │ │ Azure Vision  │ │ Azure Language│     │
│  │ (예측/분류)   │ │ (음성 처리)    │ │ (이미지 분석) │ │ (NLP 처리)     │     │
│  │               │ │               │ │               │ │               │     │
│  └───────────────┘ └───────────────┘ └───────────────┘ └───────────────┘     │
├──────────────────────────────────────────────────────────────────────────────┤
│                            데이터 액세스 레이어                             │
│  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐ ┌───────────────┐     │
│  │ JSON 저장소   │ │ CSV 저장소    │ │ HTML 저장소   │ │ DB            │     │
│  │ (이력, 로그)  │ │ (VOC, 장애)   │ │ (보고서,      │ │ (Cosmos DB,   │     │
│  │               │ │               │ │  템플릿)      │ │  MS-SQL)      │     │
│  └───────────────┘ └───────────────┘ └───────────────┘ └───────────────┘     │
├──────────────────────────────────────────────────────────────────────────────┤
│                            외부 시스템 연동 레이어                          │
│  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐ ┌───────────────┐     │
│  │ B-****        │ │ G****+        │ │ T****         │ │ 이메일 시스템 │     │
│  │ (모니터링)    │ │ (I***)        │ │ (알림/보고)   │ │ (알림 발송)   │     │
│  │               │ │               │ │               │ │               │     │
│  │               │ │               │ │               │ │               │     │
│  └───────────────┘ └───────────────┘ └───────────────┘ └───────────────┘     │
└──────────────────────────────────────────────────────────────────────────────┘
```

### 아키텍처 구성 요소

- **Flask 웹 서버**: 사용자 인터페이스, REST API, 인증/권한 관리 제공
- **동작 모드 레이어**: Agent(자동화)/Ask(챗봇)/DB(데이터) 모드 전환 및 통합 제어
- **LangChain / LangGraph**: LLM 기반 워크플로우, 멀티에이전트, 자연어 처리
- **TO-DO Agent**: 장애/품질 업무 자동화, 이력 관리, 재수행 지원
- **워크플로우 엔진**: 장애 감지~분석~보고~후속조치 전체 프로세스 자동화
- **AI 분석 엔진**: 장애 원인 분석, VOC 감정 분석, 보고서 자동 생성
- **감정 분석 모델**: Azure Language 서비스 기반 VOC 데이터의 감정 분류 및 키워드 추출
- **이상 탐지 모델**: Azure Vision 서비스 기반 시각적 이상 탐지 및 OCR 텍스트 분석
- **VOC 분석 엔진**: 실시간 VOC 데이터 처리, 감정 점수 계산, 트렌드 분석
- **시각화 엔진**: 분석 결과 차트 생성, 워드클라우드, 대시보드 시각화
- **Azure Machine Learning**: 장애 예측, 감정분석, 이상탐지 등 ML 기반 자동화 및 모델 관리
- **Azure Speech**: 음성 합성(TTS), 음성 인식(STT), 음성 명령 처리
- **Azure Vision**: 이미지 분석, OCR, 시각적 이상 탐지, 스크린샷 분석
- **Azure Language**: 자연어 처리, 텍스트 분석, 키워드 추출, 감정 분석
- **데이터 저장소**: JSON/CSV/HTML/Cosmos DB/MS-SQL 등 다양한 포맷 지원, 이력 및 결과 저장
- **외부 시스템 연동**: B-****(모니터링), G****+(I***), T****(알림), 이메일 시스템 등과 통합

※ 상세 구조 및 각 레이어별 파일/코드는 각 가이드 문서(AZURE_SPEECH_GUIDE.md, AZURE_LANGUAGE_GUIDE.md, AZURE_VISION_GUIDE.md) 참고

---

<a name="core-technologies"></a>
## 3. 요소 기술

### 🔄 LangGraph 워크플로우 엔진

**1*개 노드 워크플로우 구현**
- **LangGraphNode/LangGraphEdge 클래스**: 노드와 엣지의 상태 관리 및 실행 추적
- **계층적 실행 구조**: 장애 예방 → 장애 대응 → 후속 조치 → 해결 완료 순차 처리
- **실시간 상태 추적**: 각 노드의 실행 상태, 데이터, 오류 메시지 모니터링
- **의존성 기반 실행**: 상위 노드 완료 후 하위 노드 자동 실행

**실제 구현된 워크플로우 노드**
- **장애 예방**: `execute_prevention` → `execute_cab_verification` → `execute_sop_check` → `execute_ai_rm_aggregation`
- **장애 대응**: `execute_incident_detection` → `execute_b***_analysis` → `execute_g***_analysis` → `execute_t***_summary`
- **후속 조치**: `execute_root_cause_analysis` → `execute_incident` → `execute_problem_management` → `execute_incident_report`

### 🤖 LangChain 멀티 에이전트 시스템

**TO-DO Agent 구현**
- **tool_selector_llm**: 사용자 입력을 분석하여 적절한 워크플로우 노드 매핑
- **계층적 실행 로직**: 같은 경계 내에서 상위 노드 완료 확인 후 하위 노드 실행
- **병렬/순차 실행**: 독립적인 작업은 병렬(`||`), 의존적인 작업은 순차(`,`) 처리
- **실행 이력 관리**: 각 단계별 실행 결과 및 상태 추적

**에이전트 간 협업**
- **메시지 큐 시스템**: `queue.Queue()`를 통한 비동기 통신
- **상태 공유**: `execution_history`를 통한 공통 메모리 관리
- **우선순위 기반 실행**: 장애 심각도에 따른 에이전트 실행 순서 결정
- **장애 복구**: 에이전트 실패 시 자동 재시도 및 대체 실행 경로

### 🎯 커스텀 프롬프트 엔지니어링

**IT 장애 대응 전문 프롬프트**
- **시스템 프롬프트**: 6***줄의 상세한 워크플로우 가이드 및 툴 매핑
- **Few-shot Learning**: 실제 장애 사례를 예시로 포함한 학습
- **Chain-of-Thought**: 단계별 추론 과정을 명시한 프롬프트 설계
- **JSON 응답 형식**: 구조화된 분석 결과 및 실행 계획 반환

**도메인 특화 최적화**
- **IT 운영 전문 용어**: B-****, G****+, I*** 등 도메인 특화 용어 활용
- **워크플로우 매핑**: 실제 프로세스와 노드명 간의 정확한 매핑
- **실행 우선순위**: high/medium/low 우선순위 기반 작업 분배
- **의존성 관리**: 단계 간 의존성 및 중복 실행 방지 로직

### 🔍 RAG (Retrieval-Augmented Generation) 시스템

**3,***개 문서 벡터 검색**
- **Azure AI Search 인덱스**: `k***-csv-vector-index-****` 인덱스 활용
- 1****차원 벡터**: 문서 의미 표현을 위한 고차원 임베딩
- **하이브리드 검색**: 텍스트 검색 + 벡터 검색 결합
- **실시간 인덱싱**: 새 문서 자동 벡터화 및 인덱스 업데이트

**문서 처리 파이프라인**
- **HTML → CSV 변환**: 6개 HTML 파일을 CSV 형태로 정제
- **데이터 정규화**: 파이프(`|`) 구분자를 통한 구조화
- **소스별 분류**: 인시던트(1,***행), VOC(6***행), 릴리즈(9***행), 인프라(1,***행), B-****(4***행), G****+(3***행)
- **검색 최적화**: 관련성 점수 기반 결과 순위 및 필터링

### 🤖 머신 러닝 및 예측 분석

**VOC 감정 분석 및 분류**
- **감정 분류 모델**: Azure Language 서비스 기반 고객 피드백의 긍정/부정/중립 감정 자동 분류
- **키워드 추출**: 주요 키워드 및 구문 자동 추출 및 시각화
- **감정 점수 분석**: VOC 데이터의 감정 점수 계산 및 트렌드 분석
- **실시간 모니터링**: 2*시간 자동 VOC 데이터 분석 및 보고서 생성

**이상 탐지 및 패턴 분석**
- **시각적 이상 탐지**: Azure Vision 서비스를 통한 대시보드 상태 시각적 분석
- **OCR 기반 텍스트 분석**: 스크린샷에서 텍스트 추출 및 이상 패턴 감지
- **실시간 모니터링**: 웹사이트 대시보드 자동 스크린샷 캡처 및 분석

### 🌐 Azure AI 서비스 통합

**Azure Vision 서비스**
- **웹사이트 모니터링**: `website_monitor.py` - 실시간 대시보드 스크린샷 캡처
- **이미지 분석**: 대시보드 상태 시각적 분석 및 이상 탐지
- **OCR 기능**: 스크린샷에서 텍스트 추출 및 분석
- **자동 스크린샷**: `upload_screenshot.py` - 주기적 스크린샷 캡처

**Azure Speech 서비스**
- **TTS (Text-to-Speech)**: `html_to_speech.py` - HTML 콘텐츠를 음성으로 변환
- **STT (Speech-to-Text)**: 음성 입력을 텍스트로 변환
- **음성 합성**: 자연스러운 한국어 음성 생성
- **실시간 음성 처리**: 음성 명령 및 피드백 처리

**Azure Language 서비스**
- **VOC 감정 분석**: `voc_analyzer.py` - 고객 피드백의 감정 점수 분석
- **키워드 추출**: 주요 키워드 및 구문 자동 추출
- **텍스트 분류**: 문서 자동 분류 및 태깅
- **2*시간 자동 모니터링**: 정기적인 VOC 데이터 분석

**Azure OpenAI 서비스**
- **GPT-4 모델**: 고급 자연어 처리 및 생성
- **RAG 통합**: 검색된 문서 기반 응답 생성
- **챗봇 기능**: `rag_system.py` - 지능형 대화 시스템
- **프롬프트 엔지니어링**: 도메인 특화 프롬프트 설계

### 📊 데이터 관리 및 분석

**Azure SQL Database**
- **구조화된 데이터**: 시스템 상태, VOC 분석 결과 저장
- **실시간 쿼리**: 시스템 현황 및 분석 결과 조회
- **백업 및 복구**: 정기적인 데이터 백업 및 복구

**Azure Cosmos DB**
- **NoSQL 이벤트 데이터**: 실시간 이벤트 및 로그 저장
- **스트리밍 처리**: 대용량 이벤트 데이터 실시간 처리
- **확장성**: 자동 스케일링 및 글로벌 분산

**Azure Blob Storage**
- **파일 저장**: 스크린샷, 분석 결과, 백업 파일 저장
- **버전 관리**: 파일 버전 관리 및 이력 추적
- **CDN 연동**: 빠른 파일 접근 및 공유

### 🔧 시스템 통합 및 모니터링

**외부 시스템 연동**
- **B-**** 시스템**: 장애 모니터링 및 알림 연동
- **G****+ 시스템**: 이벤트 관리 및 ITSM 연동
- **T**** 연동**: 알림 및 보고서 자동 발송
- **이메일 시스템**: 자동 이메일 발송 및 알림

**실시간 모니터링**
- **Azure Monitor**: 시스템 성능 및 상태 모니터링
- **로그 분석**: 실시간 로그 수집 및 분석
- **알림 시스템**: 장애 발생 시 자동 알림
- **대시보드**: 실시간 시스템 현황 시각화

---

<a name="future-plans"></a>
## 4. 향후 개선 및 확장 계획

### 🤖 AI 모델 고도화

**모델 정확도 향상**
- **AI 모델 정확도**: 현재 대비 **% 이상 정확도 개선
- **장애 감지 정확도**: **% 이상의 높은 정확도 달성
- **커스텀 파인튜닝**: 도메인 특화 모델 개발 및 최적화
- **멀티모달 AI**: 텍스트, 이미지, 음성 데이터 통합 분석

**예측 분석 및 머신러닝 파이프라인**
- **장애 예측 모델**: 사전 장애 감지 및 예방 시스템
- **자동화된 ML 파이프라인**: 데이터 수집부터 모델 배포까지 자동화
- **실시간 학습**: 새로운 데이터로 지속적인 모델 업데이트
- **성능 모니터링**: 모델 성능 실시간 추적 및 최적화

### 📱 사용자 경험 개선

**모바일 반응형 대시보드**
- **반응형 디자인**: 모든 디바이스에서 최적화된 UI/UX
- **실시간 알림**: 모바일 푸시 알림 및 SMS 연동
- **오프라인 지원**: 네트워크 불안정 시에도 기본 기능 제공

**음성 명령 인터페이스**
- **음성 인식**: 자연어 기반 시스템 제어
- **음성 피드백**: 음성으로 상태 및 결과 안내
- **음성 대화**: 대화형 장애 대응 및 분석

### 🔧 Azure AI 서비스 확장

**추가 Azure AI 서비스 통합**
- **Azure Personalizer**: 개인화된 사용자 경험 제공
- **Azure Anomaly Detector**: 이상 패턴 자동 감지
- **Azure Form Recognizer**: 문서 자동 처리 및 분석
- **Azure Translator**: 다국어 실시간 번역

**고급 분석 대시보드**
- **대화형 차트**: 드릴다운 및 필터링 기능
- **예측 대시보드**: 향후 트렌드 및 위험 요소 시각화
- **사용자 정의 보고서**: 맞춤형 분석 보고서 생성



